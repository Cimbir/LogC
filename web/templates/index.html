{{define "style"}}
<link rel="stylesheet" href="./static/css/index.css">
{{end}}

{{define "content"}}
<div id="container">
    <section id="log-timeline">
        <ul class="rb" id="timeline-list">
            <!-- Timeline items will be added here -->
        </ul>  
    </section>
    <section id="log-view">
        <!-- Log details will be added here -->
    </section>
</div>
{{end}}

{{define "script"}}
<script>
    document.addEventListener('DOMContentLoaded', function() {
        const timelineList = document.getElementById('timeline-list');
        const logView = document.getElementById('log-view');

        // Fetch logs from the API
        fetch('/api/logs/get')
            .then(response => response.json())
            .then(logs => {
                logs.forEach(log => {
                    const logItem = document.createElement('li');
                    logItem.className = 'rb-item log-timeline-item';
                    logItem.id = log.id;
                    //logItem.ng-repeat = 'itembx';
                    logItem.innerHTML = `
                        <div class="timestamp">${log.date}</div>
                        <div class="item-title">${log.title}</div>
                    `;
                    timelineList.appendChild(logItem);

                    // Add click event listener to fetch and display log details
                    logItem.addEventListener('click', function() {
                        fetch(`/api/logs/get/${log.id}`)
                            .then(response => response.json())
                            .then(logDetails => {
                                logView.innerHTML = `
                                    <div class="log-view-item" id="v${logDetails.id}">
                                        <h1 class="log-view-title log-view-main-title">${logDetails.title}</h1>
                                        ${logDetails.items.map(item => {
                                            if (item.type === 0) {
                                                return `<p class="log-view-text">${item.content}</p>`;
                                            } else if (item.type === 1) {
                                                return `<img class="log-view-image" src="/api/data/get/${item.content}" alt="Image">`;
                                            } else if (item.type === 2) {
                                                return `<h3 class="log-view-title">${item.content}</h3>`;
                                            }
                                        }).join('')}
                                    </div>
                                `;
                            })
                            .catch(error => console.error('Error fetching log details:', error));
                    });
                });
            })
            .catch(error => console.error('Error fetching logs:', error));
    });
</script>
{{end}}