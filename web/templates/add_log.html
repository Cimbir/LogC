{{define "style"}}
<link rel="stylesheet" href="./static/css/add_log.css">
{{end}}

{{define "content"}}
<form action="/add" method="POST" enctype="multipart/form-data">
    <input id="title" type="text" name="title" placeholder="Title" required><br>
    <div id="textareaContainer"></div>
    <button type="button" id="addTextareaBtn">Add Description</button>
    <select id="inputType" name="inputType">
        <option value="text">Text</option>
        <option value="image">Image</option>
        <option value="title">Title</option>
    </select>
    <input type="number" name="item-amount" value="0" id="amount" hidden required><br>
    <button type="submit">Log</button>
</form>
{{end}}

{{define "script"}}
<script>
    var id = 0;
    document.getElementById('addTextareaBtn').addEventListener('click', function() {
        var newItemDiv = document.createElement('div');
        var contentInp;
        var typeInp;
        if (document.getElementById('inputType').value == 'text') {
            contentInp = document.createElement('textarea');
            typeInp = document.createElement('input');
            typeInp.value = 'Text';
        } else if (document.getElementById('inputType').value == 'image') {
            contentInp = document.createElement('input');
            contentInp.type = 'file';
            typeInp = document.createElement('input');
            typeInp.value = 'Image';
        } else if(document.getElementById('inputType').value == 'title') {
            contentInp = document.createElement('input');
            contentInp.placeholder = 'title';
            typeInp = document.createElement('input');
            typeInp.value = 'Title';
        }
        contentInp.name = 'item' + id;
        typeInp.name = 'type' + id;
        typeInp.type = 'hidden';

        var deleteBtn = document.createElement('button');
        deleteBtn.textContent = 'Delete';
        deleteBtn.type = 'button';
        deleteBtn.addEventListener('click', function() {
            newItemDiv.remove();
        });
        newItemDiv.appendChild(contentInp);
        newItemDiv.appendChild(typeInp);
        newItemDiv.appendChild(document.createElement('br'));
        newItemDiv.appendChild(deleteBtn);
        document.getElementById('textareaContainer').appendChild(newItemDiv);
        
        document.getElementById('amount').value = ++id;
    });
</script>
{{end}}